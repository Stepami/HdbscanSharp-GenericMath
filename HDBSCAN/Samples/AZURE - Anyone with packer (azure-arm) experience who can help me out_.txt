Anyone with packer (azure-arm) experience who can help me out?
[SOLVED]: This was caused by being behind an http proxy. We'll be deploying these templates on a cloud server in the future to prevent such issues. I can't, for the life of me, connect via winrm on an azure vm when using packer. I'm new to azure, and fairly new to packer as well, but I've got a handle of using it for local images and aws ami's. All the example packer scripts seem to conform to what I'm doing, but winrm times out. My azure savvy colleague tells me I need to check the firewall on the instance itself, but opening 5985 manually does not allow me to connect. I can get to the point where it tells me my username and password are incorrect (they aren't, I can login with them via RDP.) which is progress over just "make sure the service is listening" error messages. I know we can use custom script extensions via arm to run scripts arbitrarily, but I'm not sure what the equivalent is when using the azure-arm builder with packer. I see a "custom_data_file" option for the builder, which seems like the equivalent to aws's userdata, but it talks about feeding the file to cloud-init, and strikes me as wanting cloud-init configuration (meaning it won't work on windows instances.) Googling has led me nowhere, everyone seems to act like packer should just be able to winrm in without any tinkering with init scripts to open firewall ports (which I do have to do on aws) or any other special configuration. tl;dr: Can anyone here explain to me what I need to do to get packer (azure-arm builder) to winrm into the windows instances it builds on azure?  submitted by /u/ec2-user [link] [comments] 