HTTPClient from a windows service does not do NTLM handshake
So I have an HTTP client in a .exe app which we host as a windows service. The code of the HTTPClient is below:  HttpClient client = new HttpClient(new HttpClientHandler{ UseDefaultCredentials = true}); client.baseAddress = new Uri("url"); client.DefaultRequestHeaders.Accept.Clear(); client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json")); client.DefaultRequestHeaders.ExpectContinue = true; client.DefaultRequestHeaders.Add("User-Agent","XXX"); var request - new HttpRequestMessage(HttpMethod.Post, "url api"); request.Content = new StringContent(jsonObjInStr, Encoding.UTF8, "application/json"); request.Version = HttpVersion.Version11; request.Headers.Add("Keep-Alive", "true"); request.Headers.Add("Cache-Control", "no-cache"); HttpResponseMessage response = await client.SendAsync(request); response.EnsureSuccessStatusCode(); ....  I am expecting this to undergo NTLM handshaking but it does not receive a 401 challenge from our gateway site (which redirects the request to the web api site); thus, the request fails. However, if I turn on Fiddler, the NTLM authentication and 401 challenge happen; and the request is successful. Can somebody tell the possible reason for this? (architecture)  submitted by /u/parxyval [link] [comments] 