Identifying cause of redo queue buildup.
All, have a situation that has occurred twice in the last 3-4 months, struggling to identify cause. Twice now the secondary replica redo_queue for one of our larger databases in an Always on AG has grown out of control, slowing down reports and causing them to show old data. Queries on the secondary were all showing DPT_ENTRY locks. The first time it happened, it cleared itself up automatically in a few minutes. This morning however it happened again, and after about an hour of trying to figure out the cause, we threw in the towel and restarted the SQL service, which resolved the issue immediately. There were no long-running open transactions on the primary, and there was no excessive blocking, no CPU issues, no IO issues, no memory pressure, no known network issues, I'm really at a loss. After the first occurrence, I created an alert to email us if the redo_queue gets above a certain threshold, and while that notifies us that it's happening, it doesn't really do anything to help us diagnose and fix what caused it. Looking to see if someone can point me in the right direction for what I should be looking at if this happens again.  submitted by /u/croix153 [link] [comments] 